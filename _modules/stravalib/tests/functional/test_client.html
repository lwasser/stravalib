
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>stravalib.tests.functional.test_client &#8212; stravalib 0.6.0 documentation</title>
    
  <link href="../../../../_static/css/theme.css" rel="stylesheet" />
  <link href="../../../../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/basic.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/copybutton.css" />
    
  <link rel="preload" as="script" href="../../../../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/jquery.js"></script>
    <script src="../../../../_static/underscore.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/clipboard.min.js"></script>
    <script src="../../../../_static/copybutton.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="../../../../index.html">
<p class="title">stravalib</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../../index.html">
  Home
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../../get-started/index.html">
  Get Started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../../contributing.html">
  Contributing
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../../changelog.html">
  Change Log
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../../api/stravalib.html">
  API Reference
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <h1>Source code for stravalib.tests.functional.test_client</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span><span class="p">,</span> <span class="n">absolute_import</span><span class="p">,</span> <span class="n">print_function</span><span class="p">,</span> <span class="n">unicode_literals</span>

<span class="kn">from</span> <span class="nn">stravalib</span> <span class="kn">import</span> <span class="n">model</span><span class="p">,</span> <span class="n">attributes</span><span class="p">,</span> <span class="n">exc</span><span class="p">,</span> <span class="n">unithelper</span> <span class="k">as</span> <span class="n">uh</span>
<span class="kn">from</span> <span class="nn">stravalib.client</span> <span class="kn">import</span> <span class="n">Client</span>
<span class="kn">from</span> <span class="nn">stravalib.tests.functional</span> <span class="kn">import</span> <span class="n">FunctionalTestBase</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">requests</span>


<div class="viewcode-block" id="ClientTest"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.ClientTest">[docs]</a><span class="k">class</span> <span class="nc">ClientTest</span><span class="p">(</span><span class="n">FunctionalTestBase</span><span class="p">):</span>
<div class="viewcode-block" id="ClientTest.test_get_starred_segment"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.ClientTest.test_get_starred_segment">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_starred_segment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test get_starred_segment</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">segment</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_starred_segment</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">segment</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">Segment</span><span class="p">)</span>
            <span class="n">i</span><span class="o">+=</span><span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertGreater</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1"># star at least one segment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertLessEqual</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span></div>


<div class="viewcode-block" id="ClientTest.test_get_activity"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.ClientTest.test_get_activity">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_activity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Test basic activity fetching. &quot;&quot;&quot;</span>
        <span class="n">activity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_activity</span><span class="p">(</span><span class="mi">96089609</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="s1">&#39;El Dorado County, CA, USA&#39;</span><span class="p">,</span> <span class="n">activity</span><span class="o">.</span><span class="n">location_city</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">activity</span><span class="o">.</span><span class="n">start_latlng</span><span class="p">,</span> <span class="n">attributes</span><span class="o">.</span><span class="n">LatLon</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="o">-</span><span class="mf">120.4357631</span><span class="p">,</span> <span class="n">activity</span><span class="o">.</span><span class="n">start_latlng</span><span class="o">.</span><span class="n">lon</span><span class="p">,</span> <span class="n">places</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="mf">38.74263759999999</span><span class="p">,</span> <span class="n">activity</span><span class="o">.</span><span class="n">start_latlng</span><span class="o">.</span><span class="n">lat</span><span class="p">,</span> <span class="n">places</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">activity</span><span class="o">.</span><span class="n">map</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">Map</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">activity</span><span class="o">.</span><span class="n">athlete</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">Athlete</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="mi">1513</span><span class="p">,</span> <span class="n">activity</span><span class="o">.</span><span class="n">athlete</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="c1">#self.assertAlmostEqual(first, second, places, msg, delta)</span>
        <span class="c1"># Ensure that iw as read in with correct units</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="mf">22.5308</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="n">uh</span><span class="o">.</span><span class="n">kilometers</span><span class="p">(</span><span class="n">activity</span><span class="o">.</span><span class="n">distance</span><span class="p">)))</span></div>

<div class="viewcode-block" id="ClientTest.test_get_activity_and_segments"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.ClientTest.test_get_activity_and_segments">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_activity_and_segments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Test include_all_efforts parameter on activity fetching. &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">activity_id</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s2">&quot;Include an activity_id in test.ini to test segment_efforts&quot;</span><span class="p">)</span>

        <span class="n">activity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_activity</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">activity_id</span><span class="p">,</span> <span class="n">include_all_efforts</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">activity</span><span class="o">.</span><span class="n">segment_efforts</span><span class="p">,</span> <span class="nb">list</span><span class="p">))</span>

        <span class="c1"># Check also when we have no parameters segment_efforts is None</span>
        <span class="n">activity_no_segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_activity</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">activity_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">activity</span><span class="o">.</span><span class="n">segment_efforts</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="ClientTest.test_get_route"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.ClientTest.test_get_route">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_route</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">route</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_route</span><span class="p">(</span><span class="mi">3445913</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="s1">&#39;Baveno - Mottarone&#39;</span><span class="p">,</span> <span class="n">route</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEquals</span><span class="p">(</span><span class="mf">1265.20</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="n">uh</span><span class="o">.</span><span class="n">meters</span><span class="p">(</span><span class="n">route</span><span class="o">.</span><span class="n">elevation_gain</span><span class="p">)),</span> <span class="mi">2</span><span class="p">)</span></div>

<div class="viewcode-block" id="ClientTest.test_get_activity_laps"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.ClientTest.test_get_activity_laps">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_activity_laps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">activity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_activity</span><span class="p">(</span><span class="mi">165094211</span><span class="p">)</span>
        <span class="n">laps</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_activity_laps</span><span class="p">(</span><span class="mi">165094211</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">laps</span><span class="p">))</span>
        <span class="c1"># This obviously is far from comprehensive, just a sanity check</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;Lap 1&#39;</span><span class="p">,</span> <span class="n">laps</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="mf">178.0</span><span class="p">,</span> <span class="n">laps</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">max_heartrate</span><span class="p">)</span></div>


<div class="viewcode-block" id="ClientTest.test_get_activity_zones"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.ClientTest.test_get_activity_zones">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_activity_zones</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test loading zones for activity.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">zones</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_activity_zones</span><span class="p">(</span><span class="mi">99895560</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">zones</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">zones</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">zones</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">model</span><span class="o">.</span><span class="n">PaceActivityZone</span><span class="p">)</span>

        <span class="c1"># Indirectly</span>
        <span class="n">activity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_activity</span><span class="p">(</span><span class="mi">99895560</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">zones</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">activity</span><span class="o">.</span><span class="n">zones</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">zones</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">score</span><span class="p">,</span> <span class="n">activity</span><span class="o">.</span><span class="n">zones</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">score</span><span class="p">)</span></div>

<div class="viewcode-block" id="ClientTest.test_activity_comments"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.ClientTest.test_activity_comments">[docs]</a>    <span class="k">def</span> <span class="nf">test_activity_comments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test loading comments for already-loaded activity.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">activity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_activity</span><span class="p">(</span><span class="mi">2290897</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">activity</span><span class="o">.</span><span class="n">comment_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">comments</span><span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">activity</span><span class="o">.</span><span class="n">comments</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">comments</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="s2">&quot;I love Gordo&#39;s. I&#39;ve been eating there for 20 years!&quot;</span><span class="p">,</span> <span class="n">comments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">)</span></div>

<div class="viewcode-block" id="ClientTest.test_activity_photos"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.ClientTest.test_activity_photos">[docs]</a>    <span class="k">def</span> <span class="nf">test_activity_photos</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test photos on activity</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">activity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_activity</span><span class="p">(</span><span class="mi">643026323</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">activity</span><span class="o">.</span><span class="n">total_photo_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">photos</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">activity</span><span class="o">.</span><span class="n">full_photos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">photos</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">photos</span><span class="p">),</span> <span class="n">activity</span><span class="o">.</span><span class="n">total_photo_count</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">photos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">model</span><span class="o">.</span><span class="n">ActivityPhoto</span><span class="p">)</span></div>

<div class="viewcode-block" id="ClientTest.test_activity_kudos"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.ClientTest.test_activity_kudos">[docs]</a>    <span class="k">def</span> <span class="nf">test_activity_kudos</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test kudos on activity</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">activity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_activity</span><span class="p">(</span><span class="mi">152668627</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">activity</span><span class="o">.</span><span class="n">kudos_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">kudos</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">activity</span><span class="o">.</span><span class="n">kudos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertGreater</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">kudos</span><span class="p">),</span> <span class="mi">6</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">kudos</span><span class="p">),</span> <span class="n">activity</span><span class="o">.</span><span class="n">kudos_count</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">kudos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">model</span><span class="o">.</span><span class="n">ActivityKudos</span> <span class="p">)</span></div>

<div class="viewcode-block" id="ClientTest.test_activity_streams"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.ClientTest.test_activity_streams">[docs]</a>    <span class="k">def</span> <span class="nf">test_activity_streams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test activity streams</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">stypes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="s1">&#39;latlng&#39;</span><span class="p">,</span> <span class="s1">&#39;distance&#39;</span><span class="p">,</span><span class="s1">&#39;altitude&#39;</span><span class="p">,</span> <span class="s1">&#39;velocity_smooth&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;heartrate&#39;</span><span class="p">,</span> <span class="s1">&#39;cadence&#39;</span><span class="p">,</span> <span class="s1">&#39;watts&#39;</span><span class="p">,</span> <span class="s1">&#39;temp&#39;</span><span class="p">,</span> <span class="s1">&#39;moving&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;grade_smooth&#39;</span><span class="p">]</span>

        <span class="n">streams</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_activity_streams</span><span class="p">(</span><span class="mi">152668627</span><span class="p">,</span> <span class="n">stypes</span><span class="p">,</span> <span class="s1">&#39;low&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertGreater</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">streams</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="mi">3</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">streams</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">stypes</span><span class="p">)</span>

        <span class="c1"># time stream</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">streams</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">int</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertGreater</span><span class="p">(</span><span class="n">streams</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">original_size</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">streams</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">resolution</span><span class="p">,</span> <span class="s1">&#39;low&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">streams</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">),</span> <span class="mi">100</span><span class="p">)</span>

        <span class="c1"># latlng stream</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">streams</span><span class="p">[</span><span class="s1">&#39;latlng&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">streams</span><span class="p">[</span><span class="s1">&#39;latlng&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="nb">float</span><span class="p">)</span></div>

<div class="viewcode-block" id="ClientTest.test_route_streams"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.ClientTest.test_route_streams">[docs]</a>    <span class="k">def</span> <span class="nf">test_route_streams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test toute streams</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">stypes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;latlng&#39;</span><span class="p">,</span> <span class="s1">&#39;distance&#39;</span><span class="p">,</span> <span class="s1">&#39;altitude&#39;</span><span class="p">]</span>

        <span class="n">streams</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_route_streams</span><span class="p">(</span><span class="mi">3445913</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">streams</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="mi">3</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">stypes</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">streams</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span></div>

<div class="viewcode-block" id="ClientTest.test_related_activities"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.ClientTest.test_related_activities">[docs]</a>    <span class="k">def</span> <span class="nf">test_related_activities</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test get_related_activities on an activity and related property of Activity</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">activity_id</span> <span class="o">=</span> <span class="mi">152668627</span>
        <span class="n">activity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_activity</span><span class="p">(</span><span class="n">activity_id</span><span class="p">)</span>
        <span class="n">related_activities</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_related_activities</span><span class="p">(</span><span class="n">activity_id</span><span class="p">))</span>

        <span class="c1"># Check the number of related_activities matches what activity would expect</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">related_activities</span><span class="p">),</span> <span class="n">activity</span><span class="o">.</span><span class="n">athlete_count</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Check the related property gives the same result</span>
        <span class="n">related_activities_from_property</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">activity</span><span class="o">.</span><span class="n">related</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">related_activities</span><span class="p">,</span> <span class="n">related_activities_from_property</span><span class="p">)</span></div>

<div class="viewcode-block" id="ClientTest.test_effort_streams"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.ClientTest.test_effort_streams">[docs]</a>    <span class="k">def</span> <span class="nf">test_effort_streams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test effort streams</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">stypes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;distance&#39;</span><span class="p">]</span>

        <span class="n">activity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_activity</span><span class="p">(</span><span class="mi">165479860</span><span class="p">)</span> <span class="c1">#152668627)</span>
        <span class="n">streams</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_effort_streams</span><span class="p">(</span><span class="n">activity</span><span class="o">.</span><span class="n">segment_efforts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                                                <span class="n">stypes</span><span class="p">,</span> <span class="s1">&#39;medium&#39;</span><span class="p">)</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;distance&#39;</span><span class="p">,</span> <span class="n">streams</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

        <span class="c1"># distance stream</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">streams</span><span class="p">[</span><span class="s1">&#39;distance&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">float</span><span class="p">)</span> <span class="c1">#xxx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">streams</span><span class="p">[</span><span class="s1">&#39;distance&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">resolution</span><span class="p">,</span> <span class="s1">&#39;medium&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">streams</span><span class="p">[</span><span class="s1">&#39;distance&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">),</span>
                         <span class="nb">min</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="n">streams</span><span class="p">[</span><span class="s1">&#39;distance&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">original_size</span><span class="p">))</span></div>

<div class="viewcode-block" id="ClientTest.test_get_curr_athlete"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.ClientTest.test_get_curr_athlete">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_curr_athlete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">athlete</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_athlete</span><span class="p">()</span>

        <span class="c1"># Just some basic sanity checks here</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">athlete</span><span class="o">.</span><span class="n">firstname</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">athlete</span><span class="o">.</span><span class="n">athlete_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;runner&quot;</span><span class="p">,</span> <span class="s2">&quot;cyclist&quot;</span><span class="p">])</span></div>

<div class="viewcode-block" id="ClientTest.test_get_athlete_clubs"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.ClientTest.test_get_athlete_clubs">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_athlete_clubs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">clubs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_athlete_clubs</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">clubs</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="s1">&#39;Team Roaring Mouse&#39;</span><span class="p">,</span> <span class="n">clubs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="s1">&#39;Team Strava Cycling&#39;</span><span class="p">,</span> <span class="n">clubs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="s1">&#39;Team Strava Cyclocross&#39;</span><span class="p">,</span> <span class="n">clubs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="n">clubs_indirect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_athlete</span><span class="p">()</span><span class="o">.</span><span class="n">clubs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">clubs_indirect</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">clubs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">clubs_indirect</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">clubs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">clubs_indirect</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">clubs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">clubs_indirect</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="ClientTest.test_get_gear"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.ClientTest.test_get_gear">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_gear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">g</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_gear</span><span class="p">(</span><span class="s2">&quot;g69911&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">distance</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mf">3264.67</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="s1">&#39;Salomon XT Wings 2&#39;</span><span class="p">,</span> <span class="n">g</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="s1">&#39;Salomon&#39;</span><span class="p">,</span> <span class="n">g</span><span class="o">.</span><span class="n">brand_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">primary</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">DETAILED</span><span class="p">,</span> <span class="n">g</span><span class="o">.</span><span class="n">resource_state</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="s1">&#39;g69911&#39;</span><span class="p">,</span> <span class="n">g</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="s1">&#39;XT Wings 2&#39;</span><span class="p">,</span> <span class="n">g</span><span class="o">.</span><span class="n">model_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">g</span><span class="o">.</span><span class="n">description</span><span class="p">)</span></div>

<div class="viewcode-block" id="ClientTest.test_get_segment_leaderboard"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.ClientTest.test_get_segment_leaderboard">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_segment_leaderboard</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">lb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_segment_leaderboard</span><span class="p">(</span><span class="mi">229781</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">lb</span><span class="o">.</span><span class="n">effort_count</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">lb</span><span class="o">.</span><span class="n">entry_count</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">e</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">lb</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">: </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">lb</span><span class="o">.</span><span class="n">entries</span><span class="p">))</span> <span class="c1"># 10 top results</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">lb</span><span class="o">.</span><span class="n">entries</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">model</span><span class="o">.</span><span class="n">SegmentLeaderboardEntry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">lb</span><span class="o">.</span><span class="n">entries</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">rank</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">lb</span><span class="o">.</span><span class="n">effort_count</span> <span class="o">&gt;</span> <span class="mi">8000</span><span class="p">)</span> <span class="c1"># At time of writing 8206</span>

        <span class="c1"># Check the relationships</span>
        <span class="n">athlete</span> <span class="o">=</span> <span class="n">lb</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">athlete</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">athlete</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">lb</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">athlete_name</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">athlete</span><span class="o">.</span><span class="n">firstname</span><span class="p">,</span> <span class="n">athlete</span><span class="o">.</span><span class="n">lastname</span><span class="p">))</span>

        <span class="n">effort</span> <span class="o">=</span> <span class="n">lb</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">effort</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">effort</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">effort</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">SegmentEffort</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="s1">&#39;Hawk Hill&#39;</span><span class="p">,</span> <span class="n">effort</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="n">activity</span> <span class="o">=</span> <span class="n">lb</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">activity</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">activity</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">Activity</span><span class="p">)</span></div>
        <span class="c1"># Can&#39;t assert much since #1 ranked activity will likely change in the future.</span>

<div class="viewcode-block" id="ClientTest.test_get_segment"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.ClientTest.test_get_segment">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_segment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">segment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_segment</span><span class="p">(</span><span class="mi">229781</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">segment</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">Segment</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="s1">&#39;Hawk Hill&#39;</span><span class="p">,</span> <span class="n">segment</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="mf">2.68</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="n">uh</span><span class="o">.</span><span class="n">kilometers</span><span class="p">(</span><span class="n">segment</span><span class="o">.</span><span class="n">distance</span><span class="p">)),</span> <span class="n">places</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="c1"># Fetch leaderboard</span>
        <span class="n">lb</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">leaderboard</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">lb</span><span class="p">))</span> <span class="c1"># 10 top results, 5 bottom results</span></div>

<div class="viewcode-block" id="ClientTest.test_get_segment_efforts"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.ClientTest.test_get_segment_efforts">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_segment_efforts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># test with string</span>
        <span class="n">efforts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_segment_efforts</span><span class="p">(</span><span class="mi">4357415</span><span class="p">,</span>
                                     <span class="n">start_date_local</span> <span class="o">=</span> <span class="s2">&quot;2012-12-23T00:00:00Z&quot;</span><span class="p">,</span>
                                     <span class="n">end_date_local</span>   <span class="o">=</span> <span class="s2">&quot;2012-12-23T11:00:00Z&quot;</span><span class="p">,)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">efforts</span><span class="p">)</span>

        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">effort</span> <span class="ow">in</span> <span class="n">efforts</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">effort</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">4357415</span><span class="p">,</span> <span class="n">effort</span><span class="o">.</span><span class="n">segment</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">effort</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">BaseEffort</span><span class="p">)</span>
            <span class="n">effort_date</span> <span class="o">=</span> <span class="n">effort</span><span class="o">.</span><span class="n">start_date_local</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">effort_date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">),</span> <span class="s2">&quot;2012-12-23&quot;</span><span class="p">)</span>
            <span class="n">i</span><span class="o">+=</span><span class="mi">1</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertGreater</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

        <span class="c1"># also test with datetime object</span>
        <span class="n">start_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">end_date</span> <span class="o">=</span> <span class="n">start_date</span> <span class="o">+</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
        <span class="n">efforts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_segment_efforts</span><span class="p">(</span><span class="mi">4357415</span><span class="p">,</span>
                                        <span class="n">start_date_local</span> <span class="o">=</span> <span class="n">start_date</span><span class="p">,</span>
                                        <span class="n">end_date_local</span> <span class="o">=</span> <span class="n">end_date</span><span class="p">,)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">efforts</span><span class="p">)</span>

        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">effort</span> <span class="ow">in</span> <span class="n">efforts</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">effort</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">4357415</span><span class="p">,</span> <span class="n">effort</span><span class="o">.</span><span class="n">segment</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">effort</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">BaseEffort</span><span class="p">)</span>
            <span class="n">effort_date</span> <span class="o">=</span> <span class="n">effort</span><span class="o">.</span><span class="n">start_date_local</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">effort_date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">),</span> <span class="s2">&quot;2012-12-31&quot;</span><span class="p">)</span>
            <span class="n">i</span><span class="o">+=</span><span class="mi">1</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertGreater</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span></div>

<div class="viewcode-block" id="ClientTest.test_segment_explorer"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.ClientTest.test_segment_explorer">[docs]</a>    <span class="k">def</span> <span class="nf">test_segment_explorer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span><span class="mf">37.821362</span><span class="p">,</span><span class="o">-</span><span class="mf">122.505373</span><span class="p">,</span><span class="mf">37.842038</span><span class="p">,</span><span class="o">-</span><span class="mf">122.465977</span><span class="p">)</span>
        <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">explore_segments</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span>

        <span class="c1"># This might be brittle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="s1">&#39;Hawk Hill&#39;</span><span class="p">,</span> <span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="c1"># Fetch full segment</span>
        <span class="n">segment</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">segment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">segment</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="c1"># For some reason these don&#39;t follow the simple math rules one might expect (so we round to int)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">elev_difference</span><span class="p">,</span> <span class="n">segment</span><span class="o">.</span><span class="n">elevation_high</span> <span class="o">-</span> <span class="n">segment</span><span class="o">.</span><span class="n">elevation_low</span><span class="p">,</span> <span class="n">places</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="AuthenticatedAthleteTest"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.AuthenticatedAthleteTest">[docs]</a><span class="k">class</span> <span class="nc">AuthenticatedAthleteTest</span><span class="p">(</span><span class="n">FunctionalTestBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Tests the function is_authenticated_athlete in model.Athlete</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="AuthenticatedAthleteTest.test_caching"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.AuthenticatedAthleteTest.test_caching">[docs]</a>    <span class="k">def</span> <span class="nf">test_caching</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Athlete</span><span class="p">()</span>
        <span class="n">a</span><span class="o">.</span><span class="n">_is_authenticated</span> <span class="o">=</span> <span class="s2">&quot;Not None&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">is_authenticated_athlete</span><span class="p">(),</span> <span class="s2">&quot;Not None&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="AuthenticatedAthleteTest.test_correct_athlete_returns_true"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.AuthenticatedAthleteTest.test_correct_athlete_returns_true">[docs]</a>    <span class="k">def</span> <span class="nf">test_correct_athlete_returns_true</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_athlete</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">is_authenticated_athlete</span><span class="p">())</span></div>

<div class="viewcode-block" id="AuthenticatedAthleteTest.test_detailed_resource_state_means_true"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.AuthenticatedAthleteTest.test_detailed_resource_state_means_true">[docs]</a>    <span class="k">def</span> <span class="nf">test_detailed_resource_state_means_true</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Athlete</span><span class="p">()</span>
        <span class="n">a</span><span class="o">.</span><span class="n">resource_state</span> <span class="o">=</span> <span class="n">attributes</span><span class="o">.</span><span class="n">DETAILED</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">is_authenticated_athlete</span><span class="p">())</span></div>

<div class="viewcode-block" id="AuthenticatedAthleteTest.test_correct_athlete_not_detailed_returns_true"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.AuthenticatedAthleteTest.test_correct_athlete_not_detailed_returns_true">[docs]</a>    <span class="k">def</span> <span class="nf">test_correct_athlete_not_detailed_returns_true</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_athlete</span><span class="p">()</span>
        <span class="n">a</span><span class="o">.</span><span class="n">resource_state</span> <span class="o">=</span> <span class="n">attributes</span><span class="o">.</span><span class="n">SUMMARY</span>
        <span class="c1"># Now will have to do a look up for the authenticated athlete and check the ids match</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">is_authenticated_athlete</span><span class="p">())</span></div>

<div class="viewcode-block" id="AuthenticatedAthleteTest.test_not_authenticated_athlete_is_false"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.AuthenticatedAthleteTest.test_not_authenticated_athlete_is_false">[docs]</a>    <span class="k">def</span> <span class="nf">test_not_authenticated_athlete_is_false</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">CAV_ID</span> <span class="o">=</span> <span class="mi">1353775</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_athlete</span><span class="p">(</span><span class="n">CAV_ID</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">resource_state</span><span class="p">,</span> <span class="n">attributes</span><span class="o">.</span><span class="n">SUMMARY</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">is_authenticated_athlete</span><span class="p">())</span></div></div>


<div class="viewcode-block" id="AthleteStatsTest"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.AthleteStatsTest">[docs]</a><span class="k">class</span> <span class="nc">AthleteStatsTest</span><span class="p">(</span><span class="n">FunctionalTestBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Tests the functionality for collecting athlete statistics</span>
<span class="sd">    http://strava.github.io/api/v3/athlete/#stats</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="AthleteStatsTest.test_basic_get_from_client"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.AthleteStatsTest.test_basic_get_from_client">[docs]</a>    <span class="k">def</span> <span class="nf">test_basic_get_from_client</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">stats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_athlete_stats</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">stats</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">AthleteStats</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">stats</span><span class="o">.</span><span class="n">recent_ride_totals</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">ActivityTotals</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Biggest climb: </span><span class="si">{!r}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">stats</span><span class="o">.</span><span class="n">biggest_climb_elevation_gain</span><span class="p">))</span>

        <span class="c1"># Check biggest_climb_elevation_gain has been set</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">uh</span><span class="o">.</span><span class="n">meters</span><span class="p">(</span><span class="n">stats</span><span class="o">.</span><span class="n">biggest_climb_elevation_gain</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">uh</span><span class="o">.</span><span class="n">meters</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span></div>

<div class="viewcode-block" id="AthleteStatsTest.test_get_from_client_with_authenticated_id"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.AthleteStatsTest.test_get_from_client_with_authenticated_id">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_from_client_with_authenticated_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">athlete_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_athlete</span><span class="p">()</span><span class="o">.</span><span class="n">id</span>
        <span class="n">stats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_athlete_stats</span><span class="p">(</span><span class="n">athlete_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">stats</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">AthleteStats</span><span class="p">)</span>
        <span class="c1"># Check same as before</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">stats</span><span class="o">.</span><span class="n">biggest_climb_elevation_gain</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_athlete_stats</span><span class="p">()</span><span class="o">.</span><span class="n">biggest_climb_elevation_gain</span><span class="p">)</span></div>

<div class="viewcode-block" id="AthleteStatsTest.test_get_from_client_with_wrong_id"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.AthleteStatsTest.test_get_from_client_with_wrong_id">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_from_client_with_wrong_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">CAV_ID</span> <span class="o">=</span> <span class="mi">1353775</span>
        <span class="c1"># Currently raises a requests.exceptions.HTTPError, TODO: better error handling</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">HTTPError</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_athlete_stats</span><span class="p">,</span> <span class="n">CAV_ID</span><span class="p">)</span></div>

<div class="viewcode-block" id="AthleteStatsTest.test_athlete_stats_property_option"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.AthleteStatsTest.test_athlete_stats_property_option">[docs]</a>    <span class="k">def</span> <span class="nf">test_athlete_stats_property_option</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_athlete</span><span class="p">()</span>
        <span class="n">stats</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">stats</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">stats</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">AthleteStats</span><span class="p">)</span></div>

<div class="viewcode-block" id="AthleteStatsTest.test_athlete_stats_cached"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.AthleteStatsTest.test_athlete_stats_cached">[docs]</a>    <span class="k">def</span> <span class="nf">test_athlete_stats_cached</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_athlete</span><span class="p">()</span>
        <span class="n">a</span><span class="o">.</span><span class="n">_stats</span> <span class="o">=</span> <span class="s2">&quot;Not None&quot;</span>
        <span class="n">stats</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">stats</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">stats</span><span class="p">,</span> <span class="s2">&quot;Not None&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="AthleteStatsTest.test_athlete_property_not_authenticated"><a class="viewcode-back" href="../../../../api/stravalib.tests.functional.test_client.html#stravalib.tests.functional.test_client.AthleteStatsTest.test_athlete_property_not_authenticated">[docs]</a>    <span class="k">def</span> <span class="nf">test_athlete_property_not_authenticated</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">NotImplementedError</span><span class="p">):</span>
            <span class="n">cav</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_athlete</span><span class="p">(</span><span class="mi">1353775</span><span class="p">)</span></div></div>
</pre></div>

              </div>
              
              
              <div class='prev-next-bottom'>
                

              </div>
              
          </main>
          

      </div>
    </div>
  
  <script src="../../../../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2021, Hans Lellelid.<br/>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.2.0.<br/>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>