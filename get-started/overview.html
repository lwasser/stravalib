
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Usage Overview &#8212; stravalib 0.6.0 documentation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/blank.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Contribute to Stravalib" href="../contributing.html" />
    <link rel="prev" title="Activities" href="activities.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="../index.html">
<p class="title">stravalib</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../index.html">
  Home
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  Get Started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../contributing.html">
  Contributing
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../changelog.html">
  Change Log
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../reference.html">
  API Reference Summary
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../api/stravalib.html">
  DELETE ME API Reference
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="auth.html">
   Authentication and Authorization
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="athletes.html">
   Athletes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="activities.html">
   Activities
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Usage Overview
  </a>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#retrieving-single-entities">
   Retrieving Single Entities
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#entity-resource-states">
     Entity Resource States
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#retrieving-entity-result-sets">
   Retrieving Entity Result Sets
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#attribute-types-and-units">
   Attribute Types and Units
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#date-time-types">
     Date/Time Types
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#quantities-and-units">
     Quantities and Units
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section id="usage-overview">
<span id="overview"></span><h1>Usage Overview<a class="headerlink" href="#usage-overview" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference internal" href="../reference/api/stravalib.client.Client.html#stravalib.client.Client" title="stravalib.client.Client"><code class="xref py py-class docutils literal notranslate"><span class="pre">stravalib.client.Client</span></code></a> class exposes methods that loosely correspond
with the REST methods exposed by the Strava API.</p>
<section id="retrieving-single-entities">
<h2>Retrieving Single Entities<a class="headerlink" href="#retrieving-single-entities" title="Permalink to this headline">¶</a></h2>
<p>The simplest case are the client methods that return single entities. The entity object
types are instances of <a class="reference internal" href="../reference/model.html#module-stravalib.model" title="stravalib.model"><code class="xref py py-mod docutils literal notranslate"><span class="pre">stravalib.model</span></code></a> classes. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">access_token</span><span class="o">=</span><span class="n">JOHNS_ACCESS_TOKEN</span><span class="p">)</span>
<span class="n">athlete</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_athlete</span><span class="p">()</span> <span class="c1"># Get John&#39;s full athlete record</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello, </span><span class="si">{}</span><span class="s2">. I know your email is </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">athlete</span><span class="o">.</span><span class="n">firstname</span><span class="p">,</span> <span class="n">athlete</span><span class="o">.</span><span class="n">email</span><span class="p">))</span>
<span class="c1"># &quot;Hello, John.  I know your email is john@example.com&quot;</span>
</pre></div>
</div>
<section id="entity-resource-states">
<h3>Entity Resource States<a class="headerlink" href="#entity-resource-states" title="Permalink to this headline">¶</a></h3>
<p>Entities in Strava’s API exist at different detail levels, denoted by the numeric
<cite>resource_state</cite> attribute (1=metadata, 2=summary, 3=detailed).  In general, detail level
3 (“detailed”) is only available to the user that is authenticated.  Detail level 2 (“summary”)
information is available to others.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">other_athlete</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_athlete</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span> <span class="c1"># Some other Athlete ID</span>
<span class="n">other_athlete</span><span class="o">.</span><span class="n">firstname</span>  <span class="c1"># This is accessible</span>
<span class="c1"># But this is not:</span>
<span class="c1"># other_athlete.email</span>
</pre></div>
</div>
</section>
</section>
<section id="retrieving-entity-result-sets">
<h2>Retrieving Entity Result Sets<a class="headerlink" href="#retrieving-entity-result-sets" title="Permalink to this headline">¶</a></h2>
<p>A number of Strava API endpoints return paged results.  The stravalib library abstracts over
the paging to provide an iterator that will iterate over the entire resultset, fetching 200-page
result sets under the hood.</p>
<p>This capability is provided by the <a class="reference internal" href="../api/stravalib.client.html#stravalib.client.BatchedResultsIterator" title="stravalib.client.BatchedResultsIterator"><code class="xref py py-class docutils literal notranslate"><span class="pre">stravalib.client.BatchedResultsIterator</span></code></a> class.  If
you only wish to fetch a few objects, you can specify a limit in the method call or set the limit
on the resulting iterator.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">activities</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_activities</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">activities</span><span class="p">))</span> <span class="o">==</span> <span class="mi">10</span>

<span class="c1"># or:</span>
<span class="n">activities</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_activities</span><span class="p">()</span>
<span class="n">activities</span><span class="o">.</span><span class="n">limit</span> <span class="o">=</span> <span class="mi">10</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">activities</span><span class="p">))</span> <span class="o">==</span> <span class="mi">10</span>
</pre></div>
</div>
<p>Note that setting the limit on the iterator is the only option when you are using the collection
attributes on entities.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">activity</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_activity</span><span class="p">(</span><span class="n">activity_id</span><span class="p">)</span>
<span class="n">comments</span> <span class="o">=</span> <span class="n">activity</span><span class="o">.</span><span class="n">comments</span>
<span class="n">comments</span><span class="o">.</span><span class="n">limit</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">comments</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span>
</pre></div>
</div>
</section>
<section id="attribute-types-and-units">
<h2>Attribute Types and Units<a class="headerlink" href="#attribute-types-and-units" title="Permalink to this headline">¶</a></h2>
<p>Many of the attributes in the Strava API are either temporal (or interval) types or quantities
that have implicit units associated with them. In both cases these are represented using
richer python types than the simple string or numeric values that Strava REST API returns.</p>
<section id="date-time-types">
<h3>Date/Time Types<a class="headerlink" href="#date-time-types" title="Permalink to this headline">¶</a></h3>
<p>The date+time responses are encoded as python native <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.datetime</span></code></a> objects.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_activity</span><span class="p">(</span><span class="mi">96089609</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">start_date</span><span class="p">)</span>
<span class="c1"># 2013-11-17 16:00:00+00:00</span>
</pre></div>
</div>
<p>Date values which have no time component are encoded as python native <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.date" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.date</span></code></a> objects.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">me</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_athlete</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">me</span><span class="o">.</span><span class="n">dateofbirth</span><span class="p">)</span>
<span class="c1"># 2010-12-26</span>
</pre></div>
</div>
<p>Interval/duration values are represented using <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.timedelta</span></code></a> objects, which allows
them to be added to datetime objects, etc.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_activity</span><span class="p">(</span><span class="mi">96089609</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">elapsed_time</span><span class="p">)</span>
<span class="c1"># 10:45:00</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">elapsed_time</span><span class="o">.</span><span class="n">seconds</span><span class="p">)</span>
<span class="c1"># 38700</span>
</pre></div>
</div>
</section>
<section id="quantities-and-units">
<h3>Quantities and Units<a class="headerlink" href="#quantities-and-units" title="Permalink to this headline">¶</a></h3>
<p>Typically the units for quantity attributes returned by the Strava REST API are not
what people would actually want to see (e.g. meters-per-second instead of
kilometers-per-hour or miles-per-hour).</p>
<p>To facilitate working with these quantities, stravalib makes use of the
<a class="reference external" href="https://pypi.org/project/units/">units library</a>.  You can simply cast the values string
to see a representation that includes the units:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">activity</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_activity</span><span class="p">(</span><span class="mi">96089609</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">activity</span><span class="o">.</span><span class="n">distance</span><span class="p">)</span>
<span class="c1"># 22530.80 m</span>
</pre></div>
</div>
<p>Hmmm, meters.  Well, here in the US we like to see miles.  While you can certainly do this using the units
library directly, stravalib provides a preconfigured set of common units to simplify matters.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">stravalib</span> <span class="kn">import</span> <span class="n">unithelper</span>

<span class="n">activity</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_activity</span><span class="p">(</span><span class="mi">96089609</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">unithelper</span><span class="o">.</span><span class="n">miles</span><span class="p">(</span><span class="n">activity</span><span class="o">.</span><span class="n">distance</span><span class="p">))</span>
<span class="c1"># 14.00 mi</span>
</pre></div>
</div>
<p>Of course, if you want to do something besides display those values, you’ll likely
want a number.  You can directly access the ‘num’ attribute of the <code class="xref py py-class docutils literal notranslate"><span class="pre">units.quantity.Quantity</span></code> instance,
or just cast to a numeric type (e.g. float).:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">activity</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_activity</span><span class="p">(</span><span class="mi">96089609</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">activity</span><span class="o">.</span><span class="n">distance</span><span class="p">))</span>
<span class="c1"># 22530.8</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">unithelper</span><span class="o">.</span><span class="n">miles</span><span class="p">(</span><span class="n">activity</span><span class="o">.</span><span class="n">distance</span><span class="p">)))</span>
<span class="c1"># 13.9999900581</span>
</pre></div>
</div>
</section>
</section>
</section>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="activities.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Activities</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../contributing.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Contribute to Stravalib</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2021, Hans Lellelid.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.2.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>